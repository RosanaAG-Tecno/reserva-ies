<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>IES La Fresneda · Reservas de aulas</title>

  <!-- FAVICON -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

  <!-- TAILWIND -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .mono{font-variant-numeric:tabular-nums}
    .slot{min-height:56px;background:#fff;border:1px dashed #e5e7eb;border-radius:14px}
    .btn{border-radius:14px;padding:.5rem .75rem;border:1px solid #e5e7eb;background:#fff}
    .btn[aria-current="true"]{background:#059669;color:#fff;border-color:#059669}
    .btn:hover{background:#f8fafc}
    .chip{
      display:inline-flex;align-items:center;gap:.4rem;
      padding:.2rem .55rem;border-radius:999px;
      font-size:.75rem;line-height:1rem;
      border:1px solid rgba(0,0,0,.08);
      box-shadow:0 1px 0 rgba(0,0,0,.03);
      cursor:pointer;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .badge{
      font-size:.65rem;
      padding:.05rem .4rem;
      border-radius:999px;
      background:rgba(255,255,255,.6);
      border:1px solid rgba(0,0,0,.1);
    }
  </style>
</head>

<body class="bg-gradient-to-b from-emerald-50 to-cyan-50 min-h-screen">

<div class="max-w-7xl mx-auto px-4 py-6">

<header class="flex items-center justify-between gap-4 flex-wrap">
  <div class="flex items-center gap-3">
    <img src="IES.png" alt="IES La Fresneda" class="h-12 w-auto rounded-md shadow-sm">
    <div>
      <h1 class="text-xl sm:text-2xl font-semibold text-slate-800">
        IES La Fresneda · Reservas de aulas
      </h1>
      <p class="text-sm text-slate-600">Aula del Futuro · Radio · Biblioteca</p>
    </div>
  </div>

  <div class="flex items-center gap-2 flex-wrap">
    <button id="btnPrev" class="btn">←</button>
    <button id="btnToday" class="btn">Hoy</button>
    <button id="btnNext" class="btn">→</button>

    <button id="btnDay" class="btn">Día</button>
    <button id="btnWeek" class="btn" aria-current="true">Semana</button>
    <button id="btnMonth" class="btn">Mes</button>

    <span id="rangeLabel" class="text-sm text-slate-600 ml-2"></span>
  </div>
</header>

<div class="mt-6 grid grid-cols-1 lg:grid-cols-[380px,1fr] gap-6">

<!-- FORMULARIO -->
<aside class="bg-white rounded-2xl p-4 shadow border">
<h2 class="text-lg font-medium mb-3">Crear reserva</h2>

<input id="inpProf" placeholder="Profesor/a" class="w-full mb-2 p-2 border rounded-xl">
<input id="inpMat" placeholder="Materia" class="w-full mb-2 p-2 border rounded-xl">

<select id="selActividad" class="w-full mb-2 p-2 border rounded-xl">
  <option value="centro">Actividad del centro</option>
  <option value="fuera">Actividad externa</option>
</select>

<input id="inpPIN" placeholder="PIN (opcional)" class="w-full mb-2 p-2 border rounded-xl">

<select id="selAula" class="w-full mb-2 p-2 border rounded-xl">
  <option>Aula del Futuro</option>
  <option>Radio</option>
  <option>Biblioteca</option>
</select>

<div class="grid grid-cols-2 gap-2">
  <input id="dateDesde" type="date" class="p-2 border rounded-xl">
  <input id="dateHasta" type="date" class="p-2 border rounded-xl">
</div>

<h3 class="mt-3 text-sm font-medium">Días</h3>
<div id="daysBox" class="max-h-32 overflow-auto border rounded-xl p-2 bg-slate-50"></div>

<h3 class="mt-3 text-sm font-medium">Franjas horarias</h3>
<div id="slotsBox" class="border rounded-xl p-2 bg-slate-50"></div>

<button id="btnSave" class="mt-4 w-full bg-emerald-600 text-white py-2 rounded-xl">
Guardar reservas
</button>

<div id="msg" class="text-sm mt-2"></div>
</aside>

<!-- CALENDARIO -->
<main class="bg-white rounded-2xl p-4 shadow border">
  <div id="grid"></div>
</main>

</div>
</div>

<!-- FIREBASE Y LÓGICA -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCzoZJD3TZyK9eWGtLKKZsxdqtOwV51tY0",
  authDomain: "reservas-ies-fresneda.firebaseapp.com",
  projectId: "reservas-ies-fresneda"
};

const app = initializeApp(firebaseConfig);
await signInAnonymously(getAuth(app));
const db = getFirestore(app);

document.getElementById("grid").innerHTML =
  "<p class='text-slate-600'>La app se ha cargado correctamente. Firebase activo.</p>";
</script>

</body>
</html>
